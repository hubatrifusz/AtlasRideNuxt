#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run tests and capture the output to check for failures
if pnpm run test:ci | grep -q "FAIL\|failed\|Error:"; then
  echo "âŒ Tests failed! Push aborted."
  exit 1
else
  echo "âœ… Tests passed!"
fi

# Run type checking
echo "ğŸ” Running type checks..."
if ! pnpm run check-types; then
  echo "âŒ Type checks failed! Push aborted."
  exit 1
fi

echo "âœ… Pre-push checks completed successfully!"